<!-- Weak Review Settings Modal (Mistake Review) -->
<div id="weak-review-settings-modal" class="modal">
  <div class="modal-content modal-large">
    <div class="modal-header">
      <h3><i class="fas fa-bullseye" style="color: var(--warning-color);"></i> Ôn từ yếu</h3>
      <button class="modal-close" type="button" data-action="weak-review-close" aria-label="Đóng">
        <i class="fas fa-times"></i>
      </button>
    </div>

    <div class="modal-body flashcard-settings-body">
      <div class="settings-tabs">
        <button class="settings-tab active" type="button" data-weak-review-tab="target">Mục tiêu</button>
        <button class="settings-tab" type="button" data-weak-review-tab="mode">Chế độ</button>
        <button class="settings-tab" type="button" data-weak-review-tab="other">Khác</button>
      </div>

      <!-- Tab: Target -->
      <div id="weak-review-tab-target" class="settings-tab-content active">
        <div class="setting-section">
          <h4><i class="fas fa-clock"></i> Chỉ lấy từ sai gần đây</h4>
          <p class="section-desc">Ưu tiên các từ bạn trả lời sai trong khoảng thời gian đã chọn</p>

          <div class="radio-group">
            <label class="radio-item">
              <input type="radio" name="weak-review-days" value="7">
              <span class="radio-mark"></span>
              <span>7 ngày</span>
            </label>

            <label class="radio-item">
              <input type="radio" name="weak-review-days" value="14" checked>
              <span class="radio-mark"></span>
              <span>14 ngày</span>
            </label>

            <label class="radio-item">
              <input type="radio" name="weak-review-days" value="30">
              <span class="radio-mark"></span>
              <span>30 ngày</span>
            </label>
          </div>
        </div>

        <div class="setting-section">
          <div class="setting-row">
            <span class="setting-label"><i class="fas fa-layer-group"></i> Giới hạn số câu</span>
            <div class="setting-value">
              <button class="btn-circle" type="button" data-action="weak-review-limit-minus"><i class="fas fa-minus"></i></button>
              <span id="weak-review-limit-value">30</span>
              <button class="btn-circle" type="button" data-action="weak-review-limit-plus"><i class="fas fa-plus"></i></button>
            </div>
          </div>
          <input type="range" id="weak-review-limit-slider" min="4" max="100" value="30" class="full-slider">
        </div>
      </div>

      <!-- Tab: Mode -->
      <div id="weak-review-tab-mode" class="settings-tab-content">
        <div class="setting-section">
          <h4><i class="fas fa-play-circle"></i> Chạy bằng</h4>
          <p class="section-desc">Chọn cách bạn muốn ôn từ yếu</p>

          <div class="radio-group">
            <label class="radio-item">
              <input type="radio" name="weak-review-run-mode" value="typing" checked>
              <span class="radio-mark"></span>
              <span>Typing (gõ đáp án)</span>
            </label>

            <label class="radio-item">
              <input type="radio" name="weak-review-run-mode" value="quiz">
              <span class="radio-mark"></span>
              <span>Quiz (trắc nghiệm)</span>
            </label>
          </div>
        </div>
      </div>

      <!-- Tab: Other -->
      <div id="weak-review-tab-other" class="settings-tab-content">
        <div class="setting-section">
          <h4><i class="fas fa-keyboard"></i> Preset Typing</h4>
          <p class="section-desc">Áp dụng khi chọn chế độ Typing</p>

          <div class="radio-group">
            <label class="radio-item">
              <input type="radio" name="weak-review-typing-scoring" value="exact">
              <span class="radio-mark"></span>
              <span>Exact</span>
            </label>

            <label class="radio-item">
              <input type="radio" name="weak-review-typing-scoring" value="lenient" checked>
              <span class="radio-mark"></span>
              <span>Lenient (cho phép typo)</span>
            </label>
          </div>
        </div>

        <div class="setting-section">
          <div class="toggle-setting">
            <div class="toggle-info">
              <span><i class="fas fa-eye"></i> Hiển thị đáp án khi sai</span>
              <small>Giúp bạn sửa sai nhanh hơn</small>
            </div>
            <label class="toggle-switch">
              <input type="checkbox" id="weak-review-show-answer" checked>
              <span class="toggle-slider"></span>
            </label>
          </div>
        </div>

        <div class="setting-section">
          <div class="toggle-setting">
            <div class="toggle-info">
              <span><i class="fas fa-magic"></i> Gợi ý sửa lỗi (autoCorrect)</span>
              <small>Hiển thị gợi ý sửa khi gần đúng</small>
            </div>
            <label class="toggle-switch">
              <input type="checkbox" id="weak-review-auto-correct" checked>
              <span class="toggle-slider"></span>
            </label>
          </div>
        </div>

        <div class="setting-section">
          <div class="toggle-setting">
            <div class="toggle-info">
              <span><i class="fas fa-step-forward"></i> Tự động chuyển câu</span>
              <small>Sau khi trả lời (đang pause 5 giây)</small>
            </div>
            <label class="toggle-switch">
              <input type="checkbox" id="weak-review-auto-next" checked>
              <span class="toggle-slider"></span>
            </label>
          </div>
        </div>
      </div>
    </div>

    <div class="modal-footer">
      <button class="btn-start-practice" type="button" data-action="weak-review-start">
        <i class="fas fa-play"></i> Bắt đầu ôn từ yếu
      </button>
    </div>
  </div>
</div>
